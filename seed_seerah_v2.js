const mongoose = require('mongoose');
const InfoQuestion = require('./src/models/InfoQuestion');

const MONGODB_URI = "mongodb://mongodb:27017/ramadan_quiz";
const MODEL_ID = "699a88ecc4320375d40010c0";

const questions = [
    {
        text: "في أي عام وُلد النبي صلى الله عليه وسلم؟",
        options: ["عام الفيل", "عام الحزن", "عام الوفود", "عام الفتح"],
        correctAnswer: "عام الفيل",
        explanation: "وُلد النبي صلى الله عليه وسلم في عام الفيل، وهو العام الذي حاول فيه أبرهة الحبشي هدم الكعبة."
    },
    {
        text: "في أي مدينة وُلد النبي صلى الله عليه وسلم؟",
        options: ["مكة المكرمة", "المدينة المنورة", "الطائف", "جدة"],
        correctAnswer: "مكة المكرمة",
        explanation: "وُلد النبي صلى الله عليه وسلم في مكة المكرمة في شعب بني هاشم."
    },
    {
        text: "من هي مرضعة النبي صلى الله عليه وسلم التي قضى عندها سنواته الأولى؟",
        options: ["حليمة السعدية", "ثويبة", "أم أيمن", "فاطمة بنت أسد"],
        correctAnswer: "حليمة السعدية",
        explanation: "حليمة السعدية هي التي أرضعت النبي صلى الله عليه وسلم وأقام عندها في بادية بني سعد."
    },
    {
        text: "كم كان عمر النبي صلى الله عليه وسلم عندما توفيت أمه آمنة بنت وهب؟",
        options: ["6 سنوات", "4 سنوات", "8 سنوات", "10 سنوات"],
        correctAnswer: "6 سنوات",
        explanation: "توفيت السيدة آمنة بنت وهب والنبي صلى الله عليه وسلم في السادسة من عمره بالأبواء."
    },
    {
        text: "من كفل النبي صلى الله عليه وسلم بعد وفاة جده عبد المطلب؟",
        options: ["عمه أبو طالب", "عمه العباس", "عمه حمزة", "عمه أبو لهب"],
        correctAnswer: "عمه أبو طالب",
        explanation: "بعد وفاة جده عبد المطلب، كفله عمه أبو طالب وضمّه إلى أبنائه ورعاه أكمل رعاية."
    },
    {
        text: "بماذا كان يُلقب النبي صلى الله عليه وسلم في مكة قبل البعثة؟",
        options: ["الصادق الأمين", "الفاروق", "الصديق", "أسد الله"],
        correctAnswer: "الصادق الأمين",
        explanation: "كان أهل مكة يلقبونه بالصادق الأمين لما عرفوا فيه من صدق الحديث وأداء الأمانات."
    },
    {
        text: "ما هي المهنة التي عمل بها النبي صلى الله عليه وسلم في صغره؟",
        options: ["رعي الغنم", "النجارة", "الحدادة", "الزراعة"],
        correctAnswer: "رعي الغنم",
        explanation: "عمل النبي صلى الله عليه وسلم في صغره برعي الغنم لأهل مكة على قراريط."
    },
    {
        text: "من هو الراهب الذي رأى علامات النبوة في محمد صلى الله عليه وسلم وهو صبي في طريق الشام؟",
        options: ["بحيرة", "ورقة بن نوفل", "نسطور", "قس بن ساعدة"],
        correctAnswer: "بحيرة",
        explanation: "الراهب بحيرة رأى الغمامة تظلل النبي صلى الله عليه وسلم وعرف فيه علامات النبوة وحذر عمه عليه."
    },
    {
        text: "ما هو الحلف الذي شهده النبي صلى الله عليه وسلم في دار عبد الله بن جدعان قبل الإسلام؟",
        options: ["حلف الفضول", "حلف مكة", "حلف قريش", "حلف العرب"],
        correctAnswer: "حلف الفضول",
        explanation: "حلف الفضول كان يهدف إلى نصرة المظلوم، وقال عنه النبي صلى الله عليه وسلم: (لقد شهدت في دار عبد الله بن جدعان حلفاً ما أحب أن لي به حمر النعم)."
    },
    {
        text: "كم كان عمر النبي صلى الله عليه وسلم عندما تزوج من السيدة خديجة رضي الله عنها؟",
        options: ["25 سنة", "20 سنة", "30 سنة", "35 سنة"],
        correctAnswer: "25 سنة",
        explanation: "تزوج النبي صلى الله عليه وسلم خديجة وهو في الخامسة والعشرين من عمره."
    },
    {
        text: "كم كان عمر السيدة خديجة رضي الله عنها عندما تزوجها النبي صلى الله عليه وسلم؟",
        options: ["40 سنة", "35 سنة", "30 سنة", "25 سنة"],
        correctAnswer: "40 سنة",
        explanation: "كان عمر السيدة خديجة رضي الله عنها أربعين سنة عندما تزوجت من النبي صلى الله عليه وسلم."
    },
    {
        text: "ما هو لقب السيدة خديجة رضي الله عنها قبل الإسلام؟",
        options: ["الطاهرة", "الزهراء", "أم المساكين", "الحوراء"],
        correctAnswer: "الطاهرة",
        explanation: "كانت السيدة خديجة رضي الله عنها تُلقب في الجاهلية بالطاهرة."
    },
    {
        text: "من هو الذي حكم بين قريش في وضع الحجر الأسود في مكانه؟",
        options: ["محمد صلى الله عليه وسلم", "أبو بكر الصديق", "عمر بن الخطاب", "أبو سفيان"],
        correctAnswer: "محمد صلى الله عليه وسلم",
        explanation: "اختلفت قريش فيمن يضع الحجر الأسود، فحكّموا أول من دخل عليهم فكان محمد صلى الله عليه وسلم."
    },
    {
        text: "أين كان النبي صلى الله عليه وسلم يتعبد قبل نزول الوحي؟",
        options: ["غار حراء", "غار ثور", "جبل أحد", "جبل عرفات"],
        correctAnswer: "غار حراء",
        explanation: "كان النبي صلى الله عليه وسلم يخلو بنفسه للتعبد في غار حراء بجبل النور."
    },
    {
        text: "من هو الملك الذي نزل بالوحي على النبي صلى الله عليه وسلم؟",
        options: ["جبريل عليه السلام", "ميكائيل عليه السلام", "إسرافيل عليه السلام", "مالك عليه السلام"],
        correctAnswer: "جبريل عليه السلام",
        explanation: "جبريل عليه السلام هو أمين الوحي الذي نزل بالقرآن على النبي صلى الله عليه وسلم."
    },
    {
        text: "ما هي أول آية نزلت على النبي صلى الله عليه وسلم؟",
        options: ["اقرأ باسم ربك الذي خلق", "يا أيها المدثر", "الحمد لله رب العالمين", "يا أيها المزمل"],
        correctAnswer: "اقرأ باسم ربك الذي خلق",
        explanation: "أول ما نزل من القرآن الكريم هو صدر سورة العلق: (اقرأ باسم ربك الذي خلق)."
    },
    {
        text: "من هي أول من آمنت بالنبي صلى الله عليه وسلم من النساء؟",
        options: ["خديجة بنت خويلد", "عائشة بنت أبي بكر", "فاطمة الزهراء", "أم سلمة"],
        correctAnswer: "خديجة بنت خويلد",
        explanation: "خديجة بنت خويلد رضي الله عنها هي أول من آمن بالنبي صلى الله عليه وسلم مطلقاً."
    },
    {
        text: "من هو الصبي الذي كان أول من أسلم من الصبيان؟",
        options: ["علي بن أبي طالب", "زيد بن حارثة", "جعفر بن أبي طالب", "عبد الله بن عباس"],
        correctAnswer: "علي بن أبي طالب",
        explanation: "علي بن أبي طالب رضي الله عنه كان أول من أسلم من الصبيان وهو ابن عم النبي صلى الله عليه وسلم."
    },
    {
        text: "من هو ابن عم السيدة خديجة الذي بشّر النبي صلى الله عليه وسلم بالنبوة بعد نزول الوحي؟",
        options: ["ورقة بن نوفل", "نوفل بن خويلد", "زيد بن عمرو", "عمرو بن نفيل"],
        correctAnswer: "ورقة بن نوفل",
        explanation: "ورقة بن نوفل كان على النصرانية وبشر النبي صلى الله عليه وسلم بأنه ناموس الوحي الذي نزل على موسى."
    },
    {
        text: "من هو الرجل الذي كان أول من أسلم من الرجال الأحرار؟",
        options: ["أبو بكر الصديق", "عثمان بن عفان", "عمر بن الخطاب", "طلحة بن عبيد الله"],
        correctAnswer: "أبو بكر الصديق",
        explanation: "أبو بكر الصديق رضي الله عنه هو أول من أسلم من الرجال ومن أعز أصدقاء النبي صلى الله عليه وسلم."
    }
];

async function seed() {
    try {
        await mongoose.connect(MONGODB_URI);
        console.log("Connected to MongoDB");

        // Clear existing questions for this model
        await InfoQuestion.deleteMany({ modelId: MODEL_ID });
        console.log("Cleared old questions for model:", MODEL_ID);

        // Insert new questions
        const seededQuestions = questions.map(q => ({
            ...q,
            modelId: MODEL_ID
        }));

        await InfoQuestion.insertMany(seededQuestions);
        console.log(`Successfully seeded ${questions.length} questions.`);

        process.exit(0);
    } catch (error) {
        console.error("Error seeding:", error);
        process.exit(1);
    }
}

seed();
