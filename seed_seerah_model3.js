const mongoose = require('mongoose');
const InfoQuestion = require('./src/models/InfoQuestion');

const MONGODB_URI = "mongodb://mongodb:27017/ramadan_quiz";
const MODEL_ID = "699a94e5a158c5a737ddcbfe";

const questions = [
    {
        text: "من هو الصحابي الذي رافق النبي صلى الله عليه وسلم في رحلة الهجرة؟",
        options: ["أبو بكر الصديق", "عمر بن الخطاب", "علي بن أبي طالب", "عثمان بن عفان"],
        correctAnswer: "أبو بكر الصديق",
        explanation: "هاجر النبي صلى الله عليه وسلم ومعه صاحبه أبو بكر الصديق رضي الله عنه."
    },
    {
        text: "من هو الفتى الذي نام في فراش النبي ليلة الهجرة ليوهم قريشاً ببقائه؟",
        options: ["علي بن أبي طالب", "زيد بن حارثة", "جعفر بن أبي طالب", "عبد الله بن الزبير"],
        correctAnswer: "علي بن أبي طالب",
        explanation: "نام علي بن أبي طالب في فراش النبي وضحى بنفسه لرد الأمانات وتضليل مشركي قريش."
    },
    {
        text: "أين اختبأ النبي صلى الله عليه وسلم وأبو بكر لمدة ثلاث ليالٍ أثناء الهجرة؟",
        options: ["غار ثور", "غار حراء", "شعب علي", "جبل أحد"],
        correctAnswer: "غار ثور",
        explanation: "اختبأا في غار ثور، وحفظهما الله بعنايته من المشركين الذين وصلوا إلى باب الغار."
    },
    {
        text: "من هي الصحابية التي كانت تأتي بالطعام للنبي وصاحبه في الغار ولُقبت بـ 'ذات النطاقين'؟",
        options: ["أسماء بنت أبي بكر", "عائشة بنت أبي بكر", "فاطمة الزهراء", "أم سلمة"],
        correctAnswer: "أسماء بنت أبي بكر",
        explanation: "سُميت بـ 'ذات النطاقين' لأنها شقت نطاقها لتربط به سفرة الطعام للنبي وأبي بكر."
    },
    {
        text: "ما هو اسم الناقة التي هاجر عليها النبي صلى الله عليه وسلم؟",
        options: ["القصواء", "العضباء", "الوجناء", "الصهباء"],
        correctAnswer: "القصواء",
        explanation: "القصواء هي ناقة النبي التي بركت في المكان الذي بني فيه المسجد النبوي."
    },
    {
        text: "ما هو أول مسجد بني في الإسلام عند وصول النبي صلى الله عليه وسلم لمشارف المدينة؟",
        options: ["مسجد قباء", "المسجد النبوي", "المسجد الأقصى", "مسجد القبلتين"],
        correctAnswer: "مسجد قباء",
        explanation: "نزل النبي في قباء وبنى فيها أول مسجد أُسس على التقوى."
    },
    {
        text: "من هو الصحابي الذي نزل النبي صلى الله عليه وسلم ضيفاً في بيته عند وصوله للمدينة؟",
        options: ["أبو أيوب الأنصاري", "سعد بن معاذ", "أسعد بن زرارة", "جابر بن عبد الله"],
        correctAnswer: "أبو أيوب الأنصاري",
        explanation: "نزل النبي في بيت أبي أيوب الأنصاري رضي الله عنه وأقام عنده حتى بُني مسجده."
    },
    {
        text: "ماذا سُميت 'يثرب' بعد وصول النبي صلى الله عليه وسلم إليها؟",
        options: ["المدينة المنورة", "القاهرة", "بغداد", "دمشق"],
        correctAnswer: "المدينة المنورة",
        explanation: "كانت تُسمى يثرب، فسماها النبي 'طيبة' أو 'طابة' واشتهرت بالمدينة المنورة."
    },
    {
        text: "ما هو العمل العظيم الذي قام به النبي صلى الله عليه وسلم لتقوية الترابط بين المسلمين في المدينة؟",
        options: ["المؤاخاة", "التجارة", "بناء الجدران", "الزراعة"],
        correctAnswer: "المؤاخاة",
        explanation: "آخى النبي صلى الله عليه وسلم بين المهاجرين والأنصار ليكونوا جسداً واحداً في مواجهة التحديات."
    },
    {
        text: "ما هو اسم الوثيقة التي وضعها النبي لتنظيم العلاقة بين سكان المدينة من مسلمين وغيرهم؟",
        options: ["صحيفة المدينة", "عهد مكة", "ميثاق الفضول", "وثيقة الطائف"],
        correctAnswer: "صحيفة المدينة",
        explanation: "تعد صحيفة المدينة أول دستور مدني ينظم حقوق وواجبات جميع الطوائف في مجتمع واحد."
    },
    {
        text: "من هو الصحابي الذي رأى رؤيا الأذان في منامه وأقرّه النبي صلى الله عليه وسلم؟",
        options: ["عبد الله بن زيد", "بلال بن رباح", "عمر بن الخطاب", "أبو بكر الصديق"],
        correctAnswer: "عبد الله بن زيد",
        explanation: "رأى عبد الله بن زيد رؤيا الأذان، فأمره النبي أن يعلمها بلالاً لأنه أندى صوتاً."
    },
    {
        text: "أين كانت القبلة الأولى للمسلمين قبل تحويلها إلى الكعبة المشرفة؟",
        options: ["المسجد الأقصى", "بيت لحم", "جبل الطور", "مسجد قبا"],
        correctAnswer: "المسجد الأقصى",
        explanation: "صلى المسلمون نحو بيت المقدس (المسجد الأقصى) قرابة 16 أو 17 شهراً قبل التحويل."
    },
    {
        text: "في أي سنة هجرية وقعت غزوة بدر الكبرى؟",
        options: ["السنة الثانية", "السنة الأولى", "السنة الثالثة", "السنة الخامسة"],
        correctAnswer: "السنة الثانية",
        explanation: "وقعت غزوة بدر الكبرى في 17 رمضان من السنة الثانية للهجرة."
    },
    {
        text: "كم كان عدد المسلمين تقريباً في غزوة بدر؟",
        options: ["313 رجلاً", "1000 رجل", "70 رجلاً", "500 رجل"],
        correctAnswer: "313 رجلاً",
        explanation: "خرج المسلمون في عدد قليل (حوالي 313) مقابل حوالي 1000 من المشركين."
    },
    {
        text: "ما هو اللقب الذي أطلق على يوم غزوة بدر في القرآن الكريم؟",
        options: ["يوم الفرقان", "يوم الفتح", "يوم اليرموك", "يوم الأحزاب"],
        correctAnswer: "يوم الفرقان",
        explanation: "سُمي يوم الفرقان لأن الله فرق فيه بين الحق والباطل وأعز الإسلام."
    },
    {
        text: "في أي سنة هجرية وقعت غزوة أحد؟",
        options: ["السنة الثالثة", "السنة الثانية", "السنة الرابعة", "السنة الخامسة"],
        correctAnswer: "السنة الثالثة",
        explanation: "وقعت غزوة أحد في السنة الثالثة للهجرة، انتقاماً من قريش لهزيمتهم في بدر."
    },
    {
        text: "من هو الصحابي الذي كان قائد الرماة فوق الجبل في غزوة أحد؟",
        options: ["عبد الله بن جبير", "خالد بن الوليد", "سعد بن أبي وقاص", "مالك بن أنس"],
        correctAnswer: "عبد الله بن جبير",
        explanation: "أمّر النبي عبد الله بن جبير على الرماة وأوصاهم بعدم ترك أماكنهم مهما حدث."
    },
    {
        text: "من هو الصحابي الملقب بـ 'سيد الشهداء' الذي استشهد في غزوة أحد؟",
        options: ["حمزة بن عبد المطلب", "مصعب بن عمير", "جعفر بن أبي طالب", "عبد الله بن حرام"],
        correctAnswer: "حمزة بن عبد المطلب",
        explanation: "استشهد عم النبي حمزة رضي الله عنه في أحد ولقبه النبي صلى الله عليه وسلم بسيد الشهداء."
    },
    {
        text: "ما هو الدرس الأهم الذي تعلمه المسلمون من نتيجة غزوة أحد؟",
        options: ["خطورة مخالفة أمر القائد", "أهمية كثرة العدد", "ضرورة الانسحاب", "عدم المبادرة بالقتال"],
        correctAnswer: "خطورة مخالفة أمر القائد",
        explanation: "تحول النصر إلى هزيمة بسبب ترك الرماة أماكنهم مخالفة لأمر النبي صلى الله عليه وسلم."
    },
    {
        text: "من هو الصحابي الذي غسلته الملائكة عند استشهاده في غزوة أحد؟",
        options: ["حنظلة بن أبي عامر", "عمرو بن الجموح", "سعد بن الربيع", "أنس بن النضر"],
        correctAnswer: "حنظلة بن أبي عامر",
        explanation: "وُجد حنظلة بن أبي عامر يقطر رأسه ماءً فأخبر النبي أن الملائكة غسلته لأنه خرج للجهاد وهو جنب."
    }
];

async function seed() {
    try {
        await mongoose.connect(MONGODB_URI);
        console.log("Connected to MongoDB");

        // Clear existing questions for this model
        await InfoQuestion.deleteMany({ modelId: MODEL_ID });
        console.log("Cleared old questions for model:", MODEL_ID);

        // Insert new questions
        const seededQuestions = questions.map(q => ({
            ...q,
            modelId: MODEL_ID
        }));

        await InfoQuestion.insertMany(seededQuestions);
        console.log(`Successfully seeded ${questions.length} questions into Model 3.`);

        process.exit(0);
    } catch (error) {
        console.error("Error seeding:", error);
        process.exit(1);
    }
}

seed();
