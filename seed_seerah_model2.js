const mongoose = require('mongoose');
const InfoQuestion = require('./src/models/InfoQuestion');

const MONGODB_URI = "mongodb://mongodb:27017/ramadan_quiz";
const MODEL_ID = "699a92ea2b6c1057da21f547";

const questions = [
    {
        text: "كم استمرت مرحلة الدعوة السرية في مكة؟",
        options: ["سنة واحدة", "سنتان", "ثلاث سنوات", "خمس سنوات"],
        correctAnswer: "ثلاث سنوات",
        explanation: "استمرت الدعوة السرية ثلاث سنوات، كان المسلمون خلالها يجتمعون سراً لتعلم الإسلام."
    },
    {
        text: "أين كان يجتمع المسلمون سراً مع النبي صلى الله عليه وسلم في بداية الإسلام؟",
        options: ["دار الأرقم بن أبي الأرقم", "دار أبي بكر الصديق", "دار الندوة", "شعب علي"],
        correctAnswer: "دار الأرقم بن أبي الأرقم",
        explanation: "كانت دار الأرقم بن أبي الأرقم أول مدرسة في الإسلام ومقراً لاجتماع المسلمون الأوائل."
    },
    {
        text: "ما هو الجبل الذي صعد عليه النبي صلى الله عليه وسلم ليعلن الدعوة جهاراً لأهل مكة؟",
        options: ["جبل النور", "جبل الصفا", "جبل المروة", "جبل أحد"],
        correctAnswer: "جبل الصفا",
        explanation: "صعد النبي صلى الله عليه وسلم على جبل الصفا فنادى قريشاً وأعلن لهم دعوته جهاراً."
    },
    {
        text: "من هو عمه الذي عاداه بشدة وقال له 'تباً لك ألهذا جمعتنا'؟",
        options: ["أبو طالب", "أبو لهب", "العباس", "حمزة"],
        correctAnswer: "أبو لهب",
        explanation: "أبو لهب هو الذي واجه النبي صلى الله عليه وسلم بالعداء منذ اللحظة الأولى للجهر بالدعوة."
    },
    {
        text: "من هو الصحابي الذي كان سيده أمية بن خلف يعذبه في رمضاء مكة؟",
        options: ["بلال بن رباح", "عمار بن ياسر", "خباب بن الأرت", "صهيب الرومي"],
        correctAnswer: "بلال بن رباح",
        explanation: "سيدنا بلال بن رباح رضي الله عنه كان يُعذب بشدة وكان يقول 'أحد أحد'."
    },
    {
        text: "إلى أين كانت الهجرة الأولى في الإسلام؟",
        options: ["المدينة المنورة", "الحبشة", "الطائف", "خيبر"],
        correctAnswer: "الحبشة",
        explanation: "كانت الحبشة أول هجرة للمسلمين فراراً بدينهم، لأن فيها ملكاً عادلاً لا يُظلم عنده أحد."
    },
    {
        text: "من هو الملك الذي استقبل المهاجرين المسلمين في الحبشة؟",
        options: ["المقوقس", "النجاشي", "هرقل", "كسرى"],
        correctAnswer: "النجاشي",
        explanation: "النجاشي (أصحمة) هو ملك الحبشة الذي أحسن جوار المسلمين ورفض تسليمهم لقريش."
    },
    {
        text: "من هو الصحابي الذي تحدث باسم المسلمين أمام النجاشي ملك الحبشة؟",
        options: ["جعفر بن أبي طالب", "عثمان بن عفان", "عبد الرحمن بن عوف", "أبو سلمة"],
        correctAnswer: "جعفر بن أبي طالب",
        explanation: "جعفر بن أبي طالب رضي الله عنه هو الذي ألقى خطبة بليغة عرّف فيها النجاشي بحقيقة الإسلام."
    },
    {
        text: "ما هو اللقب الذي أطلق على العام الذي توفي فيه أبو طالب والسيدة خديجة؟",
        options: ["عام الفتح", "عام الوفود", "عام الحزن", "عام الرمادة"],
        correctAnswer: "عام الحزن",
        explanation: "سُمي عام الحزن لشدة حزن النبي صلى الله عليه وسلم على وفاة عمه وزوجته اللذين كانا أكبر ناصرين له."
    },
    {
        text: "إلى أي مدينة خرج النبي صلى الله عليه وسلم سيراً على الأقدام بعد اشتداد إيذاء قريش له؟",
        options: ["المدينة", "الطائف", "خيبر", "نجران"],
        correctAnswer: "الطائف",
        explanation: "خرج النبي صلى الله عليه وسلم إلى الطائف يلتمس النصرة من قبيلة ثقيف ولكنهم آذوه."
    },
    {
        text: "ما هي المعجزة العظيمة التي كانت تكريماً للنبي صلى الله عليه وسلم بعد رحلة الطائف؟",
        options: ["انشقاق القمر", "الإسراء والمعراج", "نزول المطر", "انفجار الماء من أصابعه"],
        correctAnswer: "الإسراء والمعراج",
        explanation: "رحلة الإسراء والمعراج كانت تسلية وتكريماً للنبي صلى الله عليه وسلم من ربه عز وجل."
    },
    {
        text: "أين كان منتهى رحلة الإسراء قبل البدء بالمعراج؟",
        options: ["المسجد الحرام", "المسجد الأقصى", "مسجد قباء", "المسجد النبوي"],
        correctAnswer: "المسجد الأقصى",
        explanation: "أُسري بالنبي صلى الله عليه وسلم من المسجد الحرام إلى المسجد الأقصى في بيت المقدس."
    },
    {
        text: "ما هي العبادة التي فُرضت في رحلة الإسراء والمعراج؟",
        options: ["الصيام", "الزكاة", "الصلاة", "الحج"],
        correctAnswer: "الصلاة",
        explanation: "فُرضت الصلوات الخمس في ليلة الإسراء والمعراج لعظم قدرها في الإسلام."
    },
    {
        text: "كم عدد الصلوات التي فُرضت أولاً قبل أن تُخفف إلى خمس؟",
        options: ["50 صلاة", "10 صلوات", "100 صلاة", "20 صلاة"],
        correctAnswer: "50 صلاة",
        explanation: "فُرضت الصلاة في البداية خمسين صلاة، ثم خففها الله سبحانه وتعالى إلى خمس برحمته."
    },
    {
        text: "من هو الصحابي الذي لُقب بـ 'الصديق' لأنه صدق النبي في خبر الإسراء والمعراج؟",
        options: ["أبو بكر الصديق", "عمر بن الخطاب", "عثمان بن عفان", "علي بن أبي طالب"],
        correctAnswer: "أبو بكر الصديق",
        explanation: "سُمي أبا بكر بالصديق لأنه قال حين كذب الناس النبي في الإسراء: (إن كان قال فقد صدق)."
    },
    {
        text: "من هو أول سفير في الإسلام أرسله النبي صلى الله عليه وسلم للمدينة؟",
        options: ["مصعب بن عمير", "عبد الله بن عمر", "معاذ بن جبل", "أبو عبيدة بن الجراح"],
        correctAnswer: "مصعب بن عمير",
        explanation: "أرسل النبي مصعب بن عمير رضي الله عنه إلى يثرب (المدينة) ليعلم الناس القرآن بعد بيعة العقبة الأولى."
    },
    {
        text: "كم كان عدد الأنصار في بيعة العقبة الثانية؟",
        options: ["12 رجلاً", "73 رجلاً وامرأتان", "100 رجل", "50 رجلاً"],
        correctAnswer: "73 رجلاً وامرأتان",
        explanation: "بايع النبي صلى الله عليه وسلم في العقبة الثانية 73 رجلاً وامرأتان (نسيبة بنت كعب وأسماء بنت عمرو)."
    },
    {
        text: "ما هي القبيلتان اللتان كان بينهما سراع طويل في المدينة قبل الإسلام؟",
        options: ["الأوس والخزرج", "بكر وتغلب", "عبس وذبيان", "قريش وهوازن"],
        correctAnswer: "الأوس والخزرج",
        explanation: "كانت الأوس والخزرج هما القبيلتان المقيمتان في يثرب، وآخى النبي بينهما بعد الهجرة."
    },
    {
        text: "من هم الذين ناصروا النبي صلى الله عليه وسلم من أهل المدينة؟",
        options: ["المهاجرون", "الأنصار", "الطلقاء", "الحواريون"],
        correctAnswer: "الأنصار",
        explanation: "سُمي أهل المدينة بالأنصار لأنهم نصروا الله ورسوله وآووا المهاجرين."
    },
    {
        text: "كم كان عمر النبي صلى الله عليه وسلم عندما تمت الهجرة إلى المدينة؟",
        options: ["40 سنة", "50 سنة", "53 سنة", "63 سنة"],
        correctAnswer: "53 سنة",
        explanation: "هاجر النبي صلى الله عليه وسلم وهو في الثالثة والخمسين من عمره، بعد 13 عاماً من الدعوة في مكة."
    }
];

async function seed() {
    try {
        await mongoose.connect(MONGODB_URI);
        console.log("Connected to MongoDB");

        // Clear existing questions for this model
        await InfoQuestion.deleteMany({ modelId: MODEL_ID });
        console.log("Cleared old questions for model:", MODEL_ID);

        // Insert new questions
        const seededQuestions = questions.map(q => ({
            ...q,
            modelId: MODEL_ID
        }));

        await InfoQuestion.insertMany(seededQuestions);
        console.log(`Successfully seeded ${questions.length} questions into Model 2.`);

        process.exit(0);
    } catch (error) {
        console.error("Error seeding:", error);
        process.exit(1);
    }
}

seed();
